# 0613

# 클라우드란? 

관리 노력과 서비스 공급자의 상호 작용을 최소화하면서 신속하게 제공하거나 해제할 수 있는 구성 가능한 컴퓨팅 리소스의 공유 풀에 어디서나 편리하게 필요한 시점에 네트워크로 접근할 수 있게 하는 모델이다.

# AWS란?

AWS는 전 세계적으로 분포한 데이터 센터에서 175개가 넘는 완벽한 기능의 서비스를 제공하는, 세계적으로 가장 포괄적이며, 널리 채택되고 있는 클라우드 플랫폼입니다. 빠르게 성장하는 스타트업, 가장 큰 규모의 엔터프라이즈, 주요 정부 기관을 포함하여 수백만명의 고객이 AWS를 사용하여 비용을 절감하고, 민첩성을 향상시키고, 더 빠르게 혁신하고 있습니다.

# AWS 특장점

초기 비용 없이 사용한 만큼만 지불하는 종량 과금제 방식

- 물리서버 X, 주문형 온디멘드

온프레미스 서버 구축 기간과 비교하여 빠른 인프라 구축 속도

온프레미스 서버 환경의 리소스 확장 시와 달리 사전 리소스 확보 불필요

- cpu, ram, 디스크 ...

인스턴스(가상 서버) 라이프사이클의 손쉬운 관리

- start, stop

고가용성 및 무정지 장애허용 시스템 구축에 필요한 서비스 제공

- HA(High Availabity) / FT(Fault Tolerance) : 내결함성 - Auto scailing

API 제공으로 서비스 관리 자동화 용이

# AWS 비용

## 1) EC2 인스턴스 시작 유형

* 온디맨드 인스턴스 : 짧은 워크로드, 예측 가능한 가격
* 예약 : (최소 1년)
  * 예약 인스턴스 : 긴 워크로드
  * 가변 예약 인스턴스 : 우연한 인스턴스가 있는 긴 워크로드
  * 스케쥴 예약 인스턴스 : 예) 매주 목요일 오후 3시 ~ 6시

- 스팟 인스턴스 : 짧은 워크로드, 저렴하지만 인스턴스를 잃을 수 있음
- 전용 호스트 : 전체 물리적 서버를 예약하고 인스턴스 배치를 제어합니다.

## 2) 온디맨드 인스턴스

- 사용한만큼 지불하십시오. (첫번째 1분후 초당 청구)
- 비용은 가장 높지만 선불 결제는 없습니다.
- 장기 약정이 없습니다.
- 애플리케이션의 작동 방식을 예측할 수 없는 단기 및 중단 없는 워크로드에 권장됩니다.

## 3) 예약 인스턴스(Reserved Instance;RI)

- 주문형에 비해 최대 75% 할인
- 장기 약정으로 사용한 것에 대해 선결제합니다.
- 예약 기간은 1년 또는 3년입니다.
- 특정 인스턴스 유형을 예약하십시오.
- 정상 상태 사용 응용 프로그램(데이터베이스)에 권장됩니다.
- 가변 예약 인스턴스
  - EC2 인스턴스 유형을 변경할 수 있습니다.
  - 최대 54% 할인
- 스케쥴된 예약 인스턴스
  - 예약 한시간 내에 시작하십시오.

## 4) 스팟 인스턴스

- 주문형에 비해 최대 90% 할인을 받을 수 있습니다.
- 최대 가격이 현재 스팟 가격보다 낮은 경우 언제든지 "손실"할 수 있는 인스턴스
- AWS에서 가장 비용 효율적인 인스턴스입니다.
- 장애에 탄력적인 워크로드에 유용합니다.
  - Batch 작업
  - 데이터 분석
  - 이미지 처리
- 중요한 작업이나 데이터베이스에는 적합하지 않습니다.
- 그레이트 콤보 : 기준선 + 예약 주문형 및 피크에 대한 스팟 예약 인스턴스

## 5) 전용 호스트

* 한 사용자를 위한 물리적 전용 EC2 서버
* EC2 인스턴스 배치를 완전히 제어합니다.
* 3년동안 사용자의 계정에 할당됩니다.
* 비싼 편입니다.
* 복잡한 라이선싱 모델 (BYOL - Bring Your Own License: 기존 보유 라이센스 사용)이 있는 소프트웨어에 유용합니다.
* 또는 강력한 규제 또는 규정 준수 요구가 있는 회사의 경우

# EC2 (Elastic Compute Cloud)

안전하고 크기 조정이 가능한 컴퓨팅 자원을 클라우드에서 제공하는 웹 서비스입니다. 개발자가 더 쉽게 웹 규모의 클라우드 컴퓨팅 작업을 할 수 있도록 설계되었습니다. Amazon EC2의 간단한 웹 서비스 인터페이스를 통해 간편하게 필요한 용량을 얻고 구성할 수 있습니다. 컴퓨팅 리소스에 대한 포괄적인 제어권을 제공하며, Amazon의 검증된 컴퓨팅 환경에서 실행할 수 있습니다.



# Amazon VPC

사용자가 정의한 가상 네트워크로 AWS 리소스를 시작할 수 있습니다. 이 가상 네트워크는 AWS의 확장 가능한 인프라를 사용한다는 이점과 함께 고객의 자체 데이터 센터에서 운영하는 기존 네트워크와 매우 유사합니다,

- Vitrual Private Cloud(VPC) : 사용자의 AWS 계정 전용 가상 네트워크입니다. 
  - 전체 네트워크 주소 범위는 172.31.0.0/16입니다. (리전 단위)
- 서브넷 : 각각의 AZ에 1개씩 네트워크 주소가 할당된 VPC의 IP 주소 범위입니다.
  - 172.31.0.0/20, 172.31.16.0/20, 172.31.32.0/20, 172.31.48.0/20 (AZ 단위)
- 라우팅 테이블 : 네트워크 트래픽을 전달할 위치를 결정하는 데 사용되는 라우팅이라는 규칙 집합입니다.
  - 172.31.0.0/16 (서브넷 단위)
- 인터넷 게이트웨이 : VPC의 리소스와 인터넷 간의 통신을 활성화하기 위해 VPC에 연결하는 게이트웨이입니다. 라우팅 테이블에 할당됩니다 (VPC 단위)
- Network ACL : Inbound(내부로의 통신), Outbound(외부로의 통신)를 기반으로 모든 통신을 허가합니다. (서브넷 단위)
- Security Group : Inbound(내부로의 통신)는 모든 통신을 거부합니다. Outbound(외부로의 통신)는 모든 통신을 허가합니다. (인스턴스 단위)

![VPC](md-images/VPC.png)

- 사용자 정의 VPC 생성
  - VPC 네트워크를 생성합니다.
  - Subnet을 생성합니다.
  - Routing Table을 생성합니다.
  - Internet Gateway를 생성합니다.
  - Network ACL을 설정합니다.
  - Security Group을 설정합니다.

# VPC Peering

VPC 피어링 연결은 프라이빗 IPv4 주소 또는 IPv6 주소를 사용하여 두 VPC 간에 트래픽을 라우팅할 수 있도록 하기 위한 두 VPC 사이의 네트워킹 연결입니다. 동일한 네트워크에 속하는 경우와 같이 VPC 의 인스턴스가 서로 통신할 수 있습니다. 사용자의 자체 VPC 또는 다른 AWS 계정의 VPC와 VPC 피어링 연결을 만들 수 있습니다. VPC는 다른 리전에 있을 수 있습니다.(리전 간 VPC 피어링 연결이라고도 함)

AWS는 VPC의 기존 인프라를 사용하여 VPC 피어링 연결을 생성합니다. 이는 게이트웨이도, VPN 연결도 아니며 물리적 하드웨어 각각에 의존하지 않습니다.

# VPC Peering 설계

글로벌 Region VPC Peering 환경 구축하기



# Route 53

Amazon Route 53을 도메인의 DNS 서비스로 사용할 수 있습니다. Route 53이 DNS 서비스인 경우, www.example.com과 같은 친숙한 도메인 이름을 컴퓨터 간 연결에 사용되는 192.0.2.1 등 숫자 IP 주소로 변환하여 인터넷 트래픽을 웹 사이트로 라우팅합니다. 사용자가 브라우저에 도메인 이름을 입력하거나 이메일을 보내면 DNS 쿼리가 Route 53에 전달되며 이에 따라 적절한 값으로 응답합니다. 예를 들어 Route 53은 example.com 웹 서버의 IP 주소를 사용하여 응답할 수 있습니다.



# EBS(Elastic Block Store)

인스턴스에 사용할 수 있는 블록 수준 스토리지 볼륨을 제공합니다. EBS 볼륨은 형식이 지정되지 않은 원시 블록 디바이스처럼 동작합니다. 이러한 볼륨을 인스턴스에 디바이스로 마운트할 수 있습니다. 동일한 인스턴스에 여러 볼륨을 탑재하고 한 번에 여러 인스턴스에 볼륨을 탑재할 수 있습니다. 이러한 볼륨 위에 파일 시스템을 생성하거나 하드 드라이브와 같은 블록 디바이스를 사용하는 것처럼 볼륨을 사용할 수 있습니다. 인스턴스에 연결된 볼륨의 구성을 동적으로 변경할 수 있습니다.

볼륨 생성 / 볼륨 연결 / 볼륨 마운트 / 루트 볼륨 확장