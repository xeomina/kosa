# 0603

# Azure

# 가상머신

## VM 생성

* WEB01
  * Win

![image-20220603092719010](md-images/0603/image-20220603092719010.png)

![image-20220603092808020](md-images/0603/image-20220603092808020.png)

### 디스크 추가 및 연결

![image-20220603092929520](md-images/0603/image-20220603092929520.png)

![image-20220603092958521](md-images/0603/image-20220603092958521.png)

![image-20220603093046138](md-images/0603/image-20220603093046138.png)

![image-20220603093233981](md-images/0603/image-20220603093233981.png)

![image-20220603093332104](md-images/0603/image-20220603093332104.png)

![image-20220603093424518](md-images/0603/image-20220603093424518.png)

![image-20220603093448188](md-images/0603/image-20220603093448188.png)

![image-20220603093458750](md-images/0603/image-20220603093458750.png)

![image-20220603093806877](md-images/0603/image-20220603093806877.png)

![image-20220603093823194](md-images/0603/image-20220603093823194.png)



### IIS

![image-20220603094615283](md-images/0603/image-20220603094615283.png)

![image-20220603094625464](md-images/0603/image-20220603094625464.png)

![image-20220603094643979](md-images/0603/image-20220603094643979.png)















![image-20220603095926156](md-images/0603/image-20220603095719969.png)



![image-20220603095815703](md-images/0603/image-20220603095815703.png)



![image-20220603100910083](md-images/0603/image-20220603100910083.png)



## 스냅샷으로 VM 생성

### 스냅샷 생성

![image-20220603101106351](md-images/0603/image-20220603101106351.png)

![image-20220603101413284](md-images/0603/image-20220603101413284.png)

![image-20220603101445247](md-images/0603/image-20220603101445247.png)

![image-20220603101509202](md-images/0603/image-20220603101509202.png)

![image-20220603101541420](md-images/0603/image-20220603101541420.png)

![image-20220603101550289](md-images/0603/image-20220603101550289.png)

![image-20220603101730437](md-images/0603/image-20220603101730437.png)

![](md-images/0603/image-20220603101826366.png)





### 디스크 생성

* MY-DISK

![image-20220603101946087](md-images/0603/image-20220603101946087.png)

![image-20220603102116825](md-images/0603/image-20220603102116825.png)

![image-20220603102150561](md-images/0603/image-20220603102150561.png)

![image-20220603102317847](md-images/0603/image-20220603102317847.png)

![image-20220603102329976](md-images/0603/image-20220603102329976.png)

![image-20220603102338583](md-images/0603/image-20220603102338583.png)

![image-20220603102347442](md-images/0603/image-20220603102347442.png)

![image-20220603102412919](md-images/0603/image-20220603102412919.png)

### VM 생성

* WEB02

![image-20220603102710029](md-images/0603/image-20220603102710029.png)

* 디스크 가용영역과 일치해야
  * 1

![image-20220603103147870](md-images/0603/image-20220603103147870.png)

![image-20220603103208869](md-images/0603/image-20220603103208869.png)

![image-20220603103252460](md-images/0603/image-20220603103252460.png)

![image-20220603103358973](md-images/0603/image-20220603103358973.png)

![image-20220603103410189](md-images/0603/image-20220603103410189.png)

![image-20220603103516047](md-images/0603/image-20220603103516047.png)

![image-20220603103525503](md-images/0603/image-20220603103525503.png)

![image-20220603103537235](md-images/0603/image-20220603103537235.png)

![image-20220603103847947](md-images/0603/image-20220603103847947.png)



# 스토리지

## 저장소 계정 생성

![image-20220603104233023](md-images/0603/image-20220603104233023.png)



![image-20220603104810578](md-images/0603/image-20220603104810578.png)

![image-20220603104820098](md-images/0603/image-20220603104820098.png)

![image-20220603104938544](md-images/0603/image-20220603104938544.png)

![image-20220603104945683](md-images/0603/image-20220603104945683.png)

![image-20220603104955353](md-images/0603/image-20220603104955353.png)

![image-20220603105002989](md-images/0603/image-20220603105002989.png)

![image-20220603105237499](md-images/0603/image-20220603105237499.png)



![image-20220603110319686](md-images/0603/image-20220603110319686.png)



## 컨테이너

### 컨테이너 생성

![image-20220603110903980](md-images/0603/image-20220603110903980.png)

### 파일 업로드

![image-20220603111359432](md-images/0603/image-20220603111359432.png)



![image-20220603111412201](md-images/0603/image-20220603111412201.png)

![image-20220603111500709](md-images/0603/image-20220603111500709.png)

![image-20220603111658234](md-images/0603/image-20220603111658234.png)

![image-20220603111806972](md-images/0603/image-20220603111806972.png)

* 다운로드

![image-20220603111852312](md-images/0603/image-20220603111852312.png)

![image-20220603112006784](md-images/0603/image-20220603112006784.png)

* URL 접속
  * 권한 x

![image-20220603111926085](md-images/0603/image-20220603111926085.png)

![image-20220603111944188](md-images/0603/image-20220603111944188.png)

### 액세스 수준 변경

![image-20220603112037020](md-images/0603/image-20220603112037020.png)

![image-20220603112237316](md-images/0603/image-20220603112237316.png)

* URL 재접속
  * 다운로드 됨

![image-20220603112336858](md-images/0603/image-20220603112336858.png)



## 파일 공유

### 파일 공유 생성

![image-20220603113219848](md-images/0603/image-20220603113219848.png)

![image-20220603113235415](md-images/0603/image-20220603113235415.png)



![image-20220603113334362](md-images/0603/image-20220603113334362.png)



![image-20220603113457689](md-images/0603/image-20220603113457689.png)

![image-20220603114035898](md-images/0603/image-20220603114035898.png)

![image-20220603114054895](md-images/0603/image-20220603114054895.png)



![image-20220603114337547](md-images/0603/image-20220603114337547.png)

### VM 접속

	* SMB

![image-20220603114705167](md-images/0603/image-20220603114705167.png)

![image-20220603114806996](md-images/0603/image-20220603114806996.png)



![image-20220603115359652](md-images/0603/image-20220603115359652.png)

![image-20220603115610249](md-images/0603/image-20220603115610249.png)

![image-20220603115637307](md-images/0603/image-20220603115637307.png)

![image-20220603120734200](md-images/0603/image-20220603120734200.png)

![image-20220603120813081](md-images/0603/image-20220603120813081.png)



![image-20220603120952244](md-images/0603/image-20220603120952244.png)

# 이미지 생성

## 가상머신 캡처

![image-20220603124542567](md-images/0603/image-20220603121334456.png)



![image-20220603121459274](md-images/0603/image-20220603121459274.png)

![image-20220603121538205](md-images/0603/image-20220603121538205.png)

![image-20220603122018984](md-images/0603/image-20220603122018984.png)



![image-20220603124801385](md-images/0603/image-20220603122028342.png)



## VM 만들기

* WEB03

![image-20220603122150419](md-images/0603/image-20220603122150419.png)





![image-20220603122700663](md-images/0603/image-20220603122700663.png)



![image-20220603122709644](md-images/0603/image-20220603122709644.png)

![image-20220603122736785](md-images/0603/image-20220603122736785.png)

![image-20220603122746447](md-images/0603/image-20220603122746447.png)

![image-20220603122756066](md-images/0603/image-20220603122756066.png)



![image-20220603122802363](md-images/0603/image-20220603122802363.png)

![image-20220603122813735](md-images/0603/image-20220603122813735.png)

![image-20220603122826351](md-images/0603/image-20220603122826351.png)

![image-20220603123956366](md-images/0603/image-20220603123956366.png)

![image-20220603124022554](md-images/0603/image-20220603124022554.png)



## WEB01

![image-20220603141018195](md-images/0603/image-20220603141018195.png)

![image-20220603141114670](md-images/0603/image-20220603141114670.png)

![image-20220603141124457](md-images/0603/image-20220603141124457.png)

![image-20220603141153279](md-images/0603/image-20220603141153279.png)

![image-20220603141240292](md-images/0603/image-20220603141240292.png)

# 가상 네트워크

## 가상 네트워크 생성

![image-20220603142343564](md-images/0603/image-20220603142343564.png)



![image-20220603142557094](md-images/0603/image-20220603142557094.png)



* 서브넷 20 bit

![image-20220603142609883](md-images/0603/image-20220603142609883.png)

![image-20220603142703067](md-images/0603/image-20220603142703067.png)

![image-20220603142726157](md-images/0603/image-20220603142726157.png)

![image-20220603142802981](md-images/0603/image-20220603142802981.png)

![image-20220603142813585](md-images/0603/image-20220603142813585.png)



![image-20220603143005837](md-images/0603/image-20220603143005837.png)



![image-20220603143028404](md-images/0603/image-20220603143028404.png)

![image-20220603143411798](md-images/0603/image-20220603143411798.png)



# 도메인 설정

## DNS 영역 만들기

![image-20220603143913673](md-images/0603/image-20220603143913673.png)

![image-20220603143927169](md-images/0603/image-20220603143927169.png)

![image-20220603143937224](md-images/0603/image-20220603143937224.png)

![image-20220603144004521](md-images/0603/image-20220603144004521.png)

![image-20220603144017915](md-images/0603/image-20220603144017915.png)

* ns1-34.azure-dns.com.
* ns2-34.azure-dns.net.
* ns3-34.azure-dns.org.
* ns4-34.azure-dns.info.

![image-20220603144257559](md-images/0603/image-20220603144257559.png)

![image-20220603144339108](md-images/0603/image-20220603144339108.png)



## 레코드 집합 생성

* WEB01의 IP 가져오기

![image-20220603144826711](md-images/0603/image-20220603144826711.png)

* IP 직접 넣기도 가능
  * WEB02 IP : `20.39.186.84`

![image-20220603145028868](md-images/0603/image-20220603145028868.png)

![image-20220603150237778](md-images/0603/image-20220603150237778.png)

![image-20220603150510210](md-images/0603/image-20220603150510210.png)

![image-20220603150606934](md-images/0603/image-20220603150606934.png)

![image-20220603150625146](md-images/0603/image-20220603150625146.png)

# Maria DB

## DB 서버 생성



![image-20220603151104426](md-images/0603/image-20220603151104426.png)

![image-20220603151855818](md-images/0603/image-20220603151855818.png)



![image-20220603152233051](md-images/0603/image-20220603152233051.png)



![image-20220603152239588](md-images/0603/image-20220603152239588.png)



![image-20220603152543909](md-images/0603/image-20220603152543909.png)

## SSH로 접속

![image-20220603153823978](md-images/0603/image-20220603153823978.png)

* 접속 불가 !!
  * SSL 옵션 사용


![image-20220603154212116](md-images/0603/image-20220603154212116.png)

## SSL

* https://docs.microsoft.com/en-us/azure/mariadb/concepts-ssl-connection-security

![image-20220603153553423](md-images/0603/image-20220603153553423.png)

* `pem` key 다운로드

![image-20220603153636219](md-images/0603/image-20220603153636219.png)

* 소스코드 복사
* https://docs.microsoft.com/en-us/azure/mariadb/howto-configure-ssl

```
mysql.exe -h mydemoserver.mariadb.database.azure.com -u Username@mydemoserver -p --ssl-mode=REQUIRED --ssl-ca=c:\ssl\BaltimoreCyberTrustRoot.crt.pem
```

![image-20220603153711626](md-images/0603/image-20220603153711626.png)

* key 파일 Moba 폴더에..

![image-20220603160600854](md-images/0603/image-20220603160600854.png)

* IP 권한이 없어 접속 불가..

![image-20220603160633192](md-images/0603/image-20220603160633192.png)

## 연결 보안 설정

* 클라이언트 IP 주소 추가
  * 강의실 IP와 WEB01 IP

![image-20220603170714032](md-images/0603/image-20220603170714032.png)

* 접속 가능

![image-20220603161106931](md-images/0603/image-20220603161106931.png)

# 웹서버

## PHP 설치

* RDP

![image-20220603160350601](md-images/0603/image-20220603160350601.png)

![image-20220603160454482](md-images/0603/image-20220603160454482.png)

* WebPlatform.msi 파일 다운로드

![image-20220603161200143](md-images/0603/image-20220603161200143.png)

* Web Platform Installer 설치

![image-20220603161215367](md-images/0603/image-20220603161215367.png)

![image-20220603161241315](md-images/0603/image-20220603161241315.png)

* Web Platform Installer 실행

![image-20220603161316284](md-images/0603/image-20220603161316284.png)

* PHP 설치

![image-20220603161533352](md-images/0603/image-20220603161533352.png)

![image-20220603162015808](md-images/0603/image-20220603162015808.png)



## 워드프레스 설치

![image-20220603161855823](md-images/0603/image-20220603161855823.png)

* `.zip` 파일 압축 해제

![image-20220603162303711](md-images/0603/image-20220603162303711.png)

* 파일 경로 이동

![image-20220603162428517](md-images/0603/image-20220603162428517.png)

* `wwwroot` 폴더 권한 설정
  * Users와 IIS_IURS

![image-20220603164828615](md-images/0603/image-20220603164828615.png)

![image-20220603164903360](md-images/0603/image-20220603164903360.png)

## 워드프레스 접속

![image-20220603165042654](md-images/0603/image-20220603165042654.png)

![image-20220603165050825](md-images/0603/image-20220603165050825.png)



